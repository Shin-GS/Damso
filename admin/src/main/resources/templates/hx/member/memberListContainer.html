<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="ko">
<div id="tableContainer" th:fragment="memberListContainer">
    <table>
        <thead>
        <tr>
            <th>Member ID</th>
            <th>Email</th>
            <th>Name</th>
            <th>Role</th>
            <th>Status</th>
            <th>Join Date</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody id="memberTableBody">
        <tr th:each="member : ${members}">
            <td th:text="${member.memberId}"></td>
            <td th:text="${member.email}"></td>
            <td th:text="${member.name}"></td>
            <td th:text="${member.role}"></td>
            <td th:text="${member.status}"></td>
            <td th:text="${member.joinDate}"></td>
            <td>
                <button>Edit</button>
                <button>Delete</button>
            </td>
        </tr>
        </tbody>
    </table>

    <div id="pagination">
        <!-- Previous 버튼 -->
        <button th:if="${page.number > 0}"
                hx-get="/hx/members"
                hx-target="#tableContainer"
                th:attr="data-page=${page.number - 1}">
            Previous
        </button>

        <!-- 페이지 번호 버튼 -->
        <span th:each="i : ${#numbers.sequence(1, page.totalPages)}">
            <button th:text="${i}"
                    th:classappend="${page.number == (i - 1)} ? 'active'"
                    hx-get="/hx/members"
                    hx-target="#tableContainer"
                    th:attr="data-page=${i - 1}">  <!-- 서버에는 0부터 전달 -->
            </button>
        </span>

        <!-- Next 버튼 -->
        <button th:if="${page.number + 1 < page.totalPages}"
                hx-get="/hx/members"
                hx-target="#tableContainer"
                th:attr="data-page=${page.number + 1}">
            Next
        </button>
    </div>
</div>
</html>