<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<div th:fragment="page-edit">
    <div th:replace="~{::page-list}"></div>
    <div th:replace="~{components/toast::success}"></div>
</div>

<div th:fragment="page-list"
     id="pages-container"
     hx-swap-oob="true"
     class="mt-8">
    <div class="flex flex-col items-center w-full"
         id="sortable-page-container"
         th:attr="data-story-id=${storyId}">
        <div id="sortable-page-list-wrapper" class="w-full overflow-x-auto">
            <div id="sortable-page-list" class="flex gap-4 w-max items-start">
                <div th:each="page, iterStat : ${storyPages}"
                     th:id="'page-' + ${page.id}"
                     th:data-id="${page.id}"
                     th:hx-get="@{'/hx/stories/' + ${storyId} + '/pages/' + ${page.id}}"
                     hx-trigger="click"
                     hx-swap="none"
                     class="flex flex-col justify-start bg-gray-100 rounded shadow-md p-4"
                     draggable="true">
                    <span class="text-2xl"
                          th:classappend="${page.storyType.code} == 'TEXT' ? 'emoji-text' :
                              (page.storyType.code == 'IMAGE' ? 'emoji-image' :
                              (page.storyType.code == 'VIDEO' ? 'emoji-video' : ''))">
                        <span th:if="${page.storyType.code} == 'TEXT'">üìù</span>
                        <span th:if="${page.storyType.code} == 'IMAGE'">üñºÔ∏è</span>
                        <span th:if="${page.storyType.code} == 'VIDEO'">üé•</span>
                    </span>
                    <button type="button"
                            class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4 rounded mt-2"
                            th:hx-delete="@{'/hx/stories/' + ${storyId} + '/pages/' + ${page.id}}"
                            hx-confirm="Ïù¥ ÌéòÏù¥ÏßÄÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"
                            hx-target="this"
                            hx-swap="outerHTML">
                        ÏÇ≠Ï†ú
                    </button>
                </div>

                <div class="flex flex-col justify-center bg-green-500 hover:bg-green-700 text-white font-bold rounded shadow-md p-4 cursor-pointer"
                     th:hx-post="@{'/hx/stories/' + ${storyId} + '/pages'}"
                     hx-trigger="click"
                     hx-target="this"
                     hx-swap="outerHTML">
                    <span class="text-2xl">‚ûï</span>
                    <span class="text-sm mt-2">Ï∂îÍ∞Ä</span>
                </div>
            </div>
        </div>
    </div>
</div>
</html>
